\documentclass[
	a4paper,
	abstracton,
	english,
  ngerman,
	twoside
] {scrreprt}

\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}

\usepackage{babel}

\usepackage{
	amsmath,
	amssymb,
	csquotes,
	etoolbox,
	framed,
	hyperref,
	isodate,
	microtype,
	multirow,
	pdfpages,
	stackengine,
	todonotes,
	upgreek,
	url,
	xfrac,
%	xspace,
}

\usepackage[linesnumbered,ruled,vlined]{algorithm2e}
\usepackage[alldates=iso8601,backend=biber]{biblatex}
\usepackage[amsmath,framed,hyperref]{ntheorem}
\usepackage[section]{placeins}
 
% after hyperref
\usepackage{
	cleveref,
	glossaries
}

% meta data
\newcommand{\docadvisor}{Prof.~Dr.~Sándor Fekete}
\newcommand{\docauthor}{Winfried Hellmann}
\renewcommand{\docdate}{2013-07-11}
\newcommand{\docsubject}{Masterarbeit}
\newcommand{\doctitle}{\foreignlanguage{english}{Computational aspects of%
\texorpdfstring{\linebreak}{} maxmin (length) triangulations}}

\author{\docauthor}
%\date{\isodate{\docdate}}
\date{\today~(DRAFT)}
\publishers{\small\textbf{Betreuer: }\docadvisor}
\subject{\docsubject}
\title{\doctitle}
\subtitle{or: How Greg Found Large Triangles}
\titlehead{Institut für Betriebssysteme und Rechnerverbund\\
Technische Universität Braunschweig}

\hypersetup{
       pdfauthor = {\docauthor},
       pdftitle = {\doctitle ---},
       pdfsubject = {\docsubject},
       pdfkeywords = {maxmin, length, triangulation}
}

% underline links
\hypersetup{
  colorlinks=false,
  linkbordercolor=red,
  pdfborderstyle={/S/U/W 1}
}

%\hypersetup{hidelinks}

%\bibliography{masterarbeit}
\addbibresource{masterarbeit.bib}
\nocite{*}

\theoremstyle{break}
\theorembodyfont{\normalfont}

\newcommand{\samepagetheorem}{%
\theoremprework{\begin{samepage}}%
\theorempostwork{\end{samepage}}%
}
%\theoremprework{\begin{minipage}{\textwidth}}
%\theorempostwork{\end{minipage}}

\samepagetheorem
\newframedtheorem{theorem}{Theorem}[chapter]

\samepagetheorem
\newframedtheorem{definition}[theorem]{Definition}

\samepagetheorem
\newframedtheorem{problem}[theorem]{Problem}

\theoremseparator{:}
\theoremstyle{nonumberbreak}
\samepagetheorem
\newframedtheorem{proof}{Proof}

\theoremstyle{empty}
\newtheorem{case}{Case}
\numberwithin{case}{proof}

% operators
\DeclareMathOperator*{\argmin}{arg\,min}

\loadglsentries{glossary}
\makeglossaries

\renewcommand{\epsilon}{\upvarepsilon}
\newcommand{\overlap}{\topinset{\hspace{-0.4ex}\rule{0.7ex}{0.15ex}}{\rotatebox{60}{\rule{2ex}{0.15ex}}}{0.5ex}{0.6ex}}

\newcommand{\includeChapter}[1]{\glsresetall\include{#1}\cleardoublepage}

\begin{document}
\selectlanguage{ngerman}
\isodate
\pagenumbering{roman}
%\frontmatter

\setboolean{@twoside}{false}
\maketitle
\setboolean{@twoside}{true}

\thispagestyle{empty}
\vspace*{\fill}
\hspace*{\fill}
for my daughter---in the hope that she will understand sometime
\cleardoublepage

\subsubsection*{\centering Erklärung}
Ich versichere, die vorliegende Arbeit selbstständig und nur unter
Benutzung der angegebenen Hilfsmittel angefertigt zu haben. Bei den
Experimenten sind keine unbeteiligten Dreiecke zu Schaden gekommen.

\vspace{2em}

Braunschweig, den {\origdate\printdate{\docdate}}
\vspace{5em}
\cleardoublepage

% abstracts
\begin{minipage}{\textwidth}
	\selectlanguage{english}
	\begin{abstract}
	Maxmin length triangulations are just awesome.
	\end{abstract}

	\selectlanguage{ngerman}
	\begin{abstract}
	Maxmin Triangulationen sind einfach super.
	\end{abstract}
\end{minipage}
\thispagestyle{plain}
\cleardoublepage

\selectlanguage{english}
\tableofcontents
\cleardoublepage

\pagenumbering{arabic}
\cleardoublepage
\setcounter{page}{1}

%\mainmatter
\includeChapter{introduction}
\includeChapter{integer_programming}
\includeChapter{triangulations}
\includeChapter{mmlt}
\includeChapter{implementation}
\includeChapter{results}
\includeChapter{conclusion}

\begin{appendix}
  \include{documentation}
\end{appendix}

\addchap{Glossary}
\printglossary[style=listdotted,type=main]
\printglossary[style=listdotted,type=prop]
\printglossary[style=listdotted,type=set]

\printbibliography
\cleardoublepage

\listoftodos

\end{document}
